<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Science With Python - Project: Hypothesis Testing in Healthcare- Drug Safety</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Project-Exploring_NYC_Public_School_Test_Result_Scores.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Project-Hypothesis_Testing_in_Healthcare.html">Project: Hypothesis Testing in Healthcare- Drug Safety</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Data Science With Python</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_Introduction_to_Python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2_Intermediate_Python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intermediate Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3_Data_Manipulation_with_pandas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Manipulation with pandas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4_Joining_Data_with_pandas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Joining Data with pandas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./5_Introduction_to_statistics_in_python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Statistics in Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./6_Introduction_to_Data_Visualization_with_Matplotlib.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Data Visualization with Matplotlib</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./7_Introduction_to_Data_Visualization_with_Seaborn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Data Visualization with Seaborn</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./8_Python_Data_Science_Toolbox_Part1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python Data Science Toolbox (Part 1)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./9_Python_Data_Science_Toolbox_Part2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python Data Science Toolbox (Part 2)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_Intermediate_Data_Visualization_with_Seaborn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intermediate Data Visualization with Seaborn</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Project-A_Visual_History_of_Nobel_Prize_Winners.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project: A Visual History of Nobel Prize Winners</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Project-Netflix_movies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project: Investigating Netflix Movies</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Project-Exploring_NYC_Public_School_Test_Result_Scores.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project: Exploring NYC Public School Test Result Scores</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Project-Hypothesis_Testing_in_Healthcare.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Project: Hypothesis Testing in Healthcare- Drug Safety</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#your-task" id="toc-your-task" class="nav-link active" data-scroll-target="#your-task">Your task</a>
  <ul class="collapse">
  <li><a href="#determine-if-the-proportion-of-adverse-effects-differs-significantly-between-the-drug-and-placebo-groups-saving-the-p-value-as-a-variable-called-two_sample_p_value." id="toc-determine-if-the-proportion-of-adverse-effects-differs-significantly-between-the-drug-and-placebo-groups-saving-the-p-value-as-a-variable-called-two_sample_p_value." class="nav-link" data-scroll-target="#determine-if-the-proportion-of-adverse-effects-differs-significantly-between-the-drug-and-placebo-groups-saving-the-p-value-as-a-variable-called-two_sample_p_value.">Determine if the proportion of adverse effects differs significantly between the Drug and Placebo groups, saving the p-value as a variable called two_sample_p_value.</a></li>
  <li><a href="#find-out-if-the-number-of-adverse-effects-is-independent-of-the-treatment-and-control-groups-saving-as-a-variable-called-num_effects_p_value-containing-a-p-value." id="toc-find-out-if-the-number-of-adverse-effects-is-independent-of-the-treatment-and-control-groups-saving-as-a-variable-called-num_effects_p_value-containing-a-p-value." class="nav-link" data-scroll-target="#find-out-if-the-number-of-adverse-effects-is-independent-of-the-treatment-and-control-groups-saving-as-a-variable-called-num_effects_p_value-containing-a-p-value.">Find out if the number of adverse effects is independent of the treatment and control groups, saving as a variable called num_effects_p_value containing a p-value.</a></li>
  </ul></li>
  <li><a href="#inspecting-whether-age-is-normally-distributed" id="toc-inspecting-whether-age-is-normally-distributed" class="nav-link" data-scroll-target="#inspecting-whether-age-is-normally-distributed">Inspecting whether age is normally distributed</a>
  <ul class="collapse">
  <li><a href="#examine-if-there-is-a-significant-difference-between-the-ages-of-the-drug-and-placebo-groups-storing-the-p-value-of-your-test-in-a-variable-called-age_group_effects_p_value." id="toc-examine-if-there-is-a-significant-difference-between-the-ages-of-the-drug-and-placebo-groups-storing-the-p-value-of-your-test-in-a-variable-called-age_group_effects_p_value." class="nav-link" data-scroll-target="#examine-if-there-is-a-significant-difference-between-the-ages-of-the-drug-and-placebo-groups-storing-the-p-value-of-your-test-in-a-variable-called-age_group_effects_p_value.">Examine if there is a significant difference between the ages of the Drug and Placebo groups, storing the p-value of your test in a variable called age_group_effects_p_value.</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Project: Hypothesis Testing in Healthcare- Drug Safety</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>A pharmaceutical company GlobalXYZ has just completed a randomized controlled drug trial. To promote transparency and reproducibility of the drug’s outcome, they (GlobalXYZ) have presented the dataset to your organization, a non-profit that focuses primarily on drug safety.</p>
<p>The dataset provided contained five adverse effects, demographic data, vital signs, etc. Your organization is primarily interested in the drug’s adverse reactions. It wants to know if the adverse reactions, if any, are of significant proportions. It has asked you to explore and answer some questions from the data.</p>
<p>The dataset <code>drug_safety.csv</code> was obtained from <a href="https://hbiostat.org/data/">Hbiostat</a> courtesy of the Vanderbilt University Department of Biostatistics. It contained five adverse effects: headache, abdominal pain, dyspepsia, upper respiratory infection, chronic obstructive airway disease (COAD), demographic data, vital signs, lab measures, etc. The ratio of drug observations to placebo observations is 2 to 1.</p>
<p>For this project, the dataset has been modified to reflect the presence and absence of adverse effects <code>adverse_effects</code> and the number of adverse effects in a single individual <code>num_effects</code>.</p>
<p>The columns in the modified dataset are:</p>
<table class="table">
<colgroup>
<col style="width: 28%">
<col style="width: 71%">
</colgroup>
<thead>
<tr class="header">
<th>Column</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>sex</code></td>
<td>The gender of the individual</td>
</tr>
<tr class="even">
<td><code>age</code></td>
<td>The age of the individual</td>
</tr>
<tr class="odd">
<td><code>week</code></td>
<td>The week of the drug testing</td>
</tr>
<tr class="even">
<td><code>trx</code></td>
<td>The treatment (Drug) and control (Placebo) groups</td>
</tr>
<tr class="odd">
<td><code>wbc</code></td>
<td>The count of white blood cells</td>
</tr>
<tr class="even">
<td><code>rbc</code></td>
<td>The count of red blood cells</td>
</tr>
<tr class="odd">
<td><code>adverse_effects</code></td>
<td>The presence of at least a single adverse effect</td>
</tr>
<tr class="even">
<td><code>num_effects</code></td>
<td>The number of adverse effects experienced by a single individual</td>
</tr>
</tbody>
</table>
<p>The original dataset can be found <a href="https://hbiostat.org/data/repo/safety.rda">here</a>.</p>
<p>Your organization has asked you to explore and answer some questions from the data collected. See the project instructions.</p>
<section id="your-task" class="level2">
<h2 class="anchored" data-anchor-id="your-task">Your task</h2>
<ul>
<li>Determine if the proportion of adverse effects differs significantly between the Drug and Placebo groups, saving the p-value as a variable called two_sample_p_value.</li>
<li>Find out if the number of adverse effects is independent of the treatment and control groups, saving as a variable called num_effects_p_value containing a p-value.</li>
<li>Examine if there is a significant difference between the ages of the Drug and Placebo groups, storing the p-value of your test in a variable called age_group_effects_p_value.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.stats.proportion <span class="im">import</span> proportions_ztest</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pingouin</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the dataset</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>drug_safety <span class="op">=</span> pd.read_csv(<span class="st">"drug_safety.csv"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Start coding here...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>drug_safety.tail(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table class="table">
<colgroup>
<col style="width: 8%">
<col style="width: 6%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 19%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>age</th>
<th>sex</th>
<th>trx</th>
<th>week</th>
<th>wbc</th>
<th>rbc</th>
<th>adverse_effects</th>
<th>num_effects</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>16083</td>
<td>62</td>
<td>female</td>
<td>Placebo</td>
<td>8</td>
<td>4.7</td>
<td>3.6</td>
<td>No</td>
<td>0</td>
</tr>
<tr class="even">
<td>16084</td>
<td>58</td>
<td>male</td>
<td>Placebo</td>
<td>0</td>
<td>9.1</td>
<td>5.1</td>
<td>No</td>
<td>0</td>
</tr>
<tr class="odd">
<td>16085</td>
<td>58</td>
<td>male</td>
<td>Placebo</td>
<td>1</td>
<td>NaN</td>
<td>NaN</td>
<td>Yes</td>
<td>1</td>
</tr>
<tr class="even">
<td>16086</td>
<td>58</td>
<td>male</td>
<td>Placebo</td>
<td>12</td>
<td>7.2</td>
<td>5.2</td>
<td>No</td>
<td>0</td>
</tr>
<tr class="odd">
<td>16087</td>
<td>58</td>
<td>male</td>
<td>Placebo</td>
<td>16</td>
<td>NaN</td>
<td>NaN</td>
<td>Yes</td>
<td>1</td>
</tr>
<tr class="even">
<td>16088</td>
<td>58</td>
<td>male</td>
<td>Placebo</td>
<td>2</td>
<td>6.9</td>
<td>5.1</td>
<td>No</td>
<td>0</td>
</tr>
<tr class="odd">
<td>16089</td>
<td>58</td>
<td>male</td>
<td>Placebo</td>
<td>20</td>
<td>NaN</td>
<td>NaN</td>
<td>Yes</td>
<td>1</td>
</tr>
<tr class="even">
<td>16090</td>
<td>58</td>
<td>male</td>
<td>Placebo</td>
<td>4</td>
<td>10.3</td>
<td>5.3</td>
<td>Yes</td>
<td>1</td>
</tr>
<tr class="odd">
<td>16091</td>
<td>58</td>
<td>male</td>
<td>Placebo</td>
<td>8</td>
<td>6.4</td>
<td>5.1</td>
<td>No</td>
<td>0</td>
</tr>
<tr class="even">
<td>16092</td>
<td>68</td>
<td>male</td>
<td>Drug</td>
<td>0</td>
<td>5.7</td>
<td>4.6</td>
<td>No</td>
<td>0</td>
</tr>
<tr class="odd">
<td>16093</td>
<td>68</td>
<td>male</td>
<td>Drug</td>
<td>1</td>
<td>NaN</td>
<td>NaN</td>
<td>Yes</td>
<td>1</td>
</tr>
<tr class="even">
<td>16094</td>
<td>68</td>
<td>male</td>
<td>Drug</td>
<td>2</td>
<td>NaN</td>
<td>NaN</td>
<td>No</td>
<td>0</td>
</tr>
<tr class="odd">
<td>16095</td>
<td>78</td>
<td>male</td>
<td>Placebo</td>
<td>0</td>
<td>7.2</td>
<td>5.0</td>
<td>No</td>
<td>0</td>
</tr>
<tr class="even">
<td>16096</td>
<td>78</td>
<td>male</td>
<td>Placebo</td>
<td>1</td>
<td>NaN</td>
<td>NaN</td>
<td>Yes</td>
<td>1</td>
</tr>
<tr class="odd">
<td>16097</td>
<td>78</td>
<td>male</td>
<td>Placebo</td>
<td>12</td>
<td>6.5</td>
<td>4.9</td>
<td>No</td>
<td>0</td>
</tr>
<tr class="even">
<td>16098</td>
<td>78</td>
<td>male</td>
<td>Placebo</td>
<td>16</td>
<td>NaN</td>
<td>NaN</td>
<td>Yes</td>
<td>1</td>
</tr>
<tr class="odd">
<td>16099</td>
<td>78</td>
<td>male</td>
<td>Placebo</td>
<td>2</td>
<td>7.5</td>
<td>4.9</td>
<td>No</td>
<td>0</td>
</tr>
<tr class="even">
<td>16100</td>
<td>78</td>
<td>male</td>
<td>Placebo</td>
<td>20</td>
<td>NaN</td>
<td>NaN</td>
<td>Yes</td>
<td>1</td>
</tr>
<tr class="odd">
<td>16101</td>
<td>78</td>
<td>male</td>
<td>Placebo</td>
<td>4</td>
<td>6.4</td>
<td>4.8</td>
<td>No</td>
<td>0</td>
</tr>
<tr class="even">
<td>16102</td>
<td>78</td>
<td>male</td>
<td>Placebo</td>
<td>8</td>
<td>7.8</td>
<td>4.8</td>
<td>No</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>drug_safety.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>Index(['age', 'sex', 'trx', 'week', 'wbc', 'rbc', 'adverse_effects',
       'num_effects'],
      dtype='object')</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>drug_safety.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 16103 entries, 0 to 16102
Data columns (total 8 columns):
 #   Column           Non-Null Count  Dtype  
---  ------           --------------  -----  
 0   age              16103 non-null  int64  
 1   sex              16103 non-null  object 
 2   trx              16103 non-null  object 
 3   week             16103 non-null  int64  
 4   wbc              9128 non-null   float64
 5   rbc              9127 non-null   float64
 6   adverse_effects  16103 non-null  object 
 7   num_effects      16103 non-null  int64  
dtypes: float64(2), int64(3), object(3)
memory usage: 1006.6+ KB</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>drug_safety.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table class="table">
<colgroup>
<col style="width: 9%">
<col style="width: 17%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>age</th>
<th>week</th>
<th>wbc</th>
<th>rbc</th>
<th>num_effects</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>count</td>
<td>16103.000000</td>
<td>16103.00000</td>
<td>9128.000000</td>
<td>9127.000000</td>
<td>16103.000000</td>
</tr>
<tr class="even">
<td>mean</td>
<td>64.117556</td>
<td>7.74098</td>
<td>7.340557</td>
<td>4.672784</td>
<td>0.101596</td>
</tr>
<tr class="odd">
<td>std</td>
<td>8.783207</td>
<td>6.94350</td>
<td>1.996652</td>
<td>0.458520</td>
<td>0.323181</td>
</tr>
<tr class="even">
<td>min</td>
<td>39.000000</td>
<td>0.00000</td>
<td>1.800000</td>
<td>2.100000</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td>25%</td>
<td>58.000000</td>
<td>1.00000</td>
<td>6.000000</td>
<td>4.400000</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td>50%</td>
<td>65.000000</td>
<td>4.00000</td>
<td>7.100000</td>
<td>4.700000</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td>75%</td>
<td>71.000000</td>
<td>12.00000</td>
<td>8.400000</td>
<td>5.000000</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td>max</td>
<td>84.000000</td>
<td>20.00000</td>
<td>26.500000</td>
<td>7.600000</td>
<td>3.000000</td>
</tr>
</tbody>
</table>
</div>
<section id="determine-if-the-proportion-of-adverse-effects-differs-significantly-between-the-drug-and-placebo-groups-saving-the-p-value-as-a-variable-called-two_sample_p_value." class="level3">
<h3 class="anchored" data-anchor-id="determine-if-the-proportion-of-adverse-effects-differs-significantly-between-the-drug-and-placebo-groups-saving-the-p-value-as-a-variable-called-two_sample_p_value.">Determine if the proportion of adverse effects differs significantly between the Drug and Placebo groups, saving the p-value as a variable called two_sample_p_value.</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.stats.proportion <span class="im">import</span> proportions_ztest</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a contingency table of adverse effects by treatment groups</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>contingency_table <span class="op">=</span> pd.crosstab(drug_safety[<span class="st">'adverse_effects'</span>], drug_safety[<span class="st">'trx'</span>])</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#print(contingency_table)</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Extracting the counts of adverse effects for Drug and Placebo groups</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>adverse_effects_drug <span class="op">=</span> contingency_table.loc[<span class="st">'Yes'</span>, <span class="st">'Drug'</span>]  <span class="co"># Assuming '1' represents presence of adverse effects</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>adverse_effects_placebo <span class="op">=</span> contingency_table.loc[<span class="st">'Yes'</span>, <span class="st">'Placebo'</span>]</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Extracting the total counts for Drug and Placebo groups</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>total_drug <span class="op">=</span> contingency_table[<span class="st">'Drug'</span>].<span class="bu">sum</span>()</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>total_placebo <span class="op">=</span> contingency_table[<span class="st">'Placebo'</span>].<span class="bu">sum</span>()</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Performing the two-sample proportions z-test</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>count <span class="op">=</span> [adverse_effects_drug, adverse_effects_placebo]</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>nobs <span class="op">=</span> [total_drug, total_placebo]</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>two_sample_z_stat, two_sample_p_value <span class="op">=</span> proportions_ztest(count, nobs)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the p-value</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The p-value for the two-sample proportions z-test is: </span><span class="sc">{</span>two_sample_p_value<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>The p-value for the two-sample proportions z-test is: 0.9639333330262475</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>two_sample_p_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>0.9639333330262475</code></pre>
</section>
<section id="find-out-if-the-number-of-adverse-effects-is-independent-of-the-treatment-and-control-groups-saving-as-a-variable-called-num_effects_p_value-containing-a-p-value." class="level3">
<h3 class="anchored" data-anchor-id="find-out-if-the-number-of-adverse-effects-is-independent-of-the-treatment-and-control-groups-saving-as-a-variable-called-num_effects_p_value-containing-a-p-value.">Find out if the number of adverse effects is independent of the treatment and control groups, saving as a variable called num_effects_p_value containing a p-value.</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>expected,observed,stats <span class="op">=</span> pingouin.chi2_independence(data<span class="op">=</span>drug_safety,x<span class="op">=</span><span class="st">'num_effects'</span>,y<span class="op">=</span><span class="st">'trx'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>num_effects_p_value <span class="op">=</span> stats[<span class="st">"pval"</span>][<span class="dv">0</span>]</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#print(stats)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="inspecting-whether-age-is-normally-distributed" class="level2">
<h2 class="anchored" data-anchor-id="inspecting-whether-age-is-normally-distributed">Inspecting whether age is normally distributed</h2>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a histogram to visualize age distribution by treatment groups</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>sns.histplot(data<span class="op">=</span>drug_safety, x<span class="op">=</span><span class="st">'age'</span>, hue<span class="op">=</span><span class="st">'trx'</span>, kde<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Distribution of Age by Treatment Groups'</span>)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Age'</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Count'</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Treatment'</span>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Project-Hypothesis_Testing_in_Healthcare_files/Project-Hypothesis_Testing_in_Healthcare_14_0.png" class="img-fluid figure-img"></p>
<figcaption>png</figcaption>
</figure>
</div>
<div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Performing Shapiro-Wilk test for normality by treatment groups (trx)</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>shapiro_results <span class="op">=</span> pg.normality(data<span class="op">=</span>drug_safety, dv<span class="op">=</span><span class="st">'age'</span>, group<span class="op">=</span><span class="st">'trx'</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying Shapiro-Wilk test results</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(shapiro_results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>                W          pval  normal
trx                                    
Drug     0.976785  2.189152e-38   False
Placebo  0.975595  2.224950e-29   False</code></pre>
<section id="examine-if-there-is-a-significant-difference-between-the-ages-of-the-drug-and-placebo-groups-storing-the-p-value-of-your-test-in-a-variable-called-age_group_effects_p_value." class="level3">
<h3 class="anchored" data-anchor-id="examine-if-there-is-a-significant-difference-between-the-ages-of-the-drug-and-placebo-groups-storing-the-p-value-of-your-test-in-a-variable-called-age_group_effects_p_value.">Examine if there is a significant difference between the ages of the Drug and Placebo groups, storing the p-value of your test in a variable called age_group_effects_p_value.</h3>
<p>Significant difference between the ages of both groups</p>
<p>To ensure age wasn’t a confounder, conduct a Mann-Whitney test to determine if age differed significantly between the trx groups.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> drug_safety</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering ages for 'Drug' group</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>age_drug <span class="op">=</span> data.loc[data[<span class="st">'trx'</span>] <span class="op">==</span> <span class="st">'Drug'</span>, <span class="st">'age'</span>]</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering ages for 'Placebo' group</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>age_placebo <span class="op">=</span> data.loc[data[<span class="st">'trx'</span>] <span class="op">==</span> <span class="st">'Placebo'</span>, <span class="st">'age'</span>]</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Performing Mann-Whitney U test for age between 'Drug' and 'Placebo' groups</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>mann_whitney_result <span class="op">=</span> pg.mwu(age_drug, age_placebo)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Extracting p-value from the Mann-Whitney U test result DataFrame</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>age_group_effects_p_value <span class="op">=</span> mann_whitney_result[<span class="st">'p-val'</span>]</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying the p-value</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"P-value for Mann-Whitney U test between 'Drug' and 'Placebo' groups: </span><span class="sc">{</span>age_group_effects_p_value<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>P-value for Mann-Whitney U test between 'Drug' and 'Placebo' groups: MWU    0.256963
Name: p-val, dtype: float64</code></pre>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Project-Exploring_NYC_Public_School_Test_Result_Scores.html" class="pagination-link" aria-label="Project: Exploring NYC Public School Test Result Scores">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Project: Exploring NYC Public School Test Result Scores</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>